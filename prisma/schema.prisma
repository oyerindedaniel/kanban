// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Board {
    id        String      @id @default(uuid())
    name      String      @unique
    columns Column[]
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    tasks Task[]
    subTasks SubTask[]

    @@index([id])
}

model Column {
    id        String      @id @default(uuid())
    name      String      @unique
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    board       Board     @relation(fields: [boardId], references: [id], onDelete: Cascade)
    boardId     String
    @@index([id])
}

model Task {
    id        String     @id @default(uuid())
    name      String     @unique
    description String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    board       Board     @relation(fields: [boardId], references: [id], onDelete: Cascade)
    boardId     String
    subTasks SubTask[]

    @@index([id])
}

model SubTask {
    id        String      @id @default(uuid())
    name      String      @unique
    isCompleted Boolean @default(false)
    currentStatus String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    task       Task     @relation(fields: [taskId], references: [id], onDelete: Cascade)
    taskId     String
    board       Board     @relation(fields: [boardId], references: [id], onDelete: Cascade)
    boardId     String

    @@index([id]) // searching and querying based on the "id" field will be more efficient
}
